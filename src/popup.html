<!DOCTYPE html>
<html>

<head>
  <title>BurnDownChart</title>
  <meta charset="UTF-8" />
  <link rel="stylesheet" type="text/css" href="semantic.min.css">
  <link rel="stylesheet" type="text/css" href="icon.min.css">
  <link rel="stylesheet" type="text/css" href="css/main.css">
  <script src="jquery-2.2.0.min.js"></script>
  <script src="semantic.min.js"></script>
  <script src="Chart.min.js"></script>
  <script src="vue.min.js"></script>
  <script src="bower_components/crypto-js/crypto-js.js"></script>
  <script src="/bower_components/semantic-ui-calendar/dist/calendar.min.js"></script>
  <link rel="stylesheet" href="/bower_components/semantic-ui-calendar/dist/calendar.min.css"></link>
</head>

<body>
  <div id="app">
    <div class="ui secondary pointing green inverted massive menu">
      <div id="boardSelectArea" class="ui dropdown item popup">
        <div class="text" v-text="boardDefaultText"></div>
        <i class="dropdown icon"></i>
        <div id="dropmenu" class="menu">
          <div v-for="boardItem in boardItems"  @click="registerBoard(boardItem)" v-bind:class="{active: boardItem.isActive, selected: boardItem.isActive}" class="item" v-bind:value="boardItem.boardId" v-bind:data-value="boardItem.boardName">{{boardItem.boardName}}</div>
        </div>
      </div>
      <div class="browse item">
        <span class="ui dropdown" v-text="graph.startDate"></span> ~
        <span class="ui dropdown" v-text="graph.endDate"></span>
      </div>
      <div class="ui flowing popup">
        <div class="ui form">
          <div id="startDate" class="field ui calendar required">
            <label>StartDate</label>
            <div class="ui left icon input">
              <i class="calendar icon"></i>
              <input id="start" type="text" placeholder="開始日" required v-bind:value="graph.startDate" v-model="graph.startDate">
            </div>
          </div>
          <div id="endDate" class="field ui calendar required">
            <label>EndDate</label>
            <div class="ui left icon input">
              <i class="calendar icon"></i>
              <input id="end" type="text" placeholder="終了日" required v-bind:value="graph.endDate" v-model="graph.endDate"/>
            </div>
          </div>
          <div class="field">
            <label>Holidays</label>
            <div class="ui left icon input">
              <i class="calendar icon"></i>
              <input id="holidays" type="text" placeholder="休日" v-bind:value="graph.holidays" />
            </div>
          </div>
        </div>
      </div>
      <div class="right menu">
        <a class="item">
          <i class="ui sync icon" @click="reload"></i>
        </a>
        <a class="item" href="./setting.html">
          <i class="ui cog icon"></i>
        </a>
      </div>
    </div>

    <div class="ui segment" v-if="error.status" hidden>
      <div class="ui error message">
        エラーが発生しました。
        <p>{{error.discription}}</p>
      </div>
    </div>

    <div class="ui segment" v-if="!trelloAuthenticated || !isValidServerConfig || !isCalendarInputed" hidden>
      <div class="ui error message">
        <p v-if="!trelloAuthenticated">SettingからTrelloのAPIKey,Tokenを入力してください。</p>
        <p v-if="!isCalendarInputed">グラフの設定値を入力してください。</p>
      </div>
    </div>

    <div class="ui main container" v-if="trelloAuthenticated && isValidServerConfig">

      <div class="ui segment" v-bind:class="{loading: loading}">
        <div id="graphArea">
          <div class="chartContainer">
            <canvas id="myChart" width="400" height="400"></canvas>
          </div>
        </div>
      </div>

    </div>
    <script src="menu.js "></script>
    <script src="popup.js "></script>
</body>

</html>
